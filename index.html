
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Documentation of prance 0.13.2 &#8212; prance 0.13.2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="prance" href="api/prance.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">prance</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jfinkhaeuser&repo=prance&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/prance.html">prance</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.mixins.html">prance.mixins</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.convert.html">prance.convert</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.util.formats.html">prance.util.formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.util.fs.html">prance.util.fs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.util.iterators.html">prance.util.iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.util.resolver.html">prance.util.resolver</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.util.url.html">prance.util.url</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.util.exceptions.html">prance.util.exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/prance.util.path.html">prance.util.path</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="api/prance.html" title="next chapter">prance</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="documentation-of-prance-release">
<h1>Documentation of prance 0.13.2<a class="headerlink" href="#documentation-of-prance-release" title="Permalink to this headline">¶</a></h1>
<p>Swagger/OpenAPI 2.0 Parser for Python</p>
<p><a class="reference external" href="https://travis-ci.org/jfinkhaeuser/prance"><img alt="Posix Build Status" src="https://travis-ci.org/jfinkhaeuser/prance.svg?branch=master" /></a> <a class="reference external" href="https://ci.appveyor.com/project/jfinkhaeuser/prance"><img alt="Windows Build Status" src="https://ci.appveyor.com/api/projects/status/ic7lo8r95mkee7di/branch/master?svg=true" /></a> <a class="reference external" href="http://prance.readthedocs.io/en/latest/"><img alt="Docs" src="https://readthedocs.org/projects/prance/badge/?version=latest" /></a> <a class="reference external" href="https://pypi.python.org/pypi/prance/"><img alt="License" src="https://img.shields.io/pypi/l/prance.svg" /></a>
<a class="reference external" href="https://pypi.python.org/pypi/prance/"><img alt="PyPI" src="https://img.shields.io/pypi/v/prance.svg" /></a> <a class="reference external" href="https://pypi.python.org/pypi/prance/"><img alt="Python Versions" src="https://img.shields.io/pypi/pyversions/prance.svg" /></a> <a class="reference external" href="https://pypi.python.org/pypi/prance/"><img alt="Package Format" src="https://img.shields.io/pypi/format/prance.svg" /></a> <a class="reference external" href="https://pypi.python.org/pypi/prance/"><img alt="Package Status" src="https://img.shields.io/pypi/status/prance.svg" /></a></p>
<p><img alt="Logo" src="https://raw.githubusercontent.com/jfinkhaeuser/prance/master/docs/images/prance_logo_256.png" /></p>
<p>Prance provides parsers for <a class="reference external" href="http://swagger.io/specification/">Swagger/OpenAPI
2.0 and 3.0</a> API specifications in Python.
It uses <a class="reference external" href="https://github.com/pipermerriam/flex">flex</a>,
<a class="reference external" href="https://github.com/Yelp/swagger_spec_validator">swagger_spec_validator</a>
or <a class="reference external" href="https://github.com/p1c2u/openapi-spec-validator">openapi_spec_validator</a>
to validate specifications, but additionally resolves <a class="reference external" href="https://tools.ietf.org/html/draft-pbryan-zyp-json-ref-03">JSON
references</a>
in accordance with the OpenAPI spec.</p>
<p>Mostly the latter involves handling non-URI references; OpenAPI is fine
with providing relative file paths, whereas JSON references require URIs
at this point in time.</p>
</div>
<div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="command-line-interface">
<h2>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>After installing prance, a CLI is available for validating (and resolving
external references in) specs:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span># Validates with resolving
$ prance validate path/to/swagger.yml

# Validates without resolving
$ prance validate --no-resolve path/to/swagger.yml

# Fetch URL, validate and resolve.
$ prance validate http://petstore.swagger.io/v2/swagger.json
Processing &quot;http://petstore.swagger.io/v2/swagger.json&quot;...
 -&gt; Resolving external references.
Validates OK as Swagger/OpenAPI 2.0!
</pre></div>
</div>
<p>Validation is not the only feature of prance. One of the side effects of
resolving is that from a spec with references, one can create a fully resolved
output spec. In the past, this was done via options to the <code class="docutils literal notranslate"><span class="pre">validate</span></code> command,
but now there’s a specific command just for this purpose:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span># Compile spec
$ prance compile path/to/input.yml path/to/output.yml
</pre></div>
</div>
<p>Lastly, with the arrival of OpenAPI 3.0.0, it becomes useful for tooling to
convert older specs to the new standard. Instead of re-inventing the wheel,
prance just provides a CLI command for passing specs to the web API of
<a class="reference external" href="https://github.com/Mermade/swagger2openapi">swagger2openapi</a> - a working
internet connection is therefore required for this command:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span># Convert spec
$ prance compile path/to/swagger.yml path/to/openapi.yml
</pre></div>
</div>
</div>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>Most likely you have spec file and want to parse it:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">prance</span> <span class="k">import</span> <span class="n">ResolvingParser</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">ResolvingParser</span><span class="p">(</span><span class="s1">&#39;path/to/my/swagger.yaml&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">specification</span>  <span class="c1"># contains fully resolved specs as a dict</span>
</pre></div>
</div>
<p>Prance also includes a non-resolving parser that does not follow JSON
references, in case you prefer that.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">prance</span> <span class="k">import</span> <span class="n">BaseParser</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">BaseParser</span><span class="p">(</span><span class="s1">&#39;path/to/my/swagger.yaml&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">specification</span>  <span class="c1"># contains specs as a dict still containing JSON references</span>
</pre></div>
</div>
<p>On Windows, the code reacts correctly if you pass posix-like paths
(<code class="docutils literal notranslate"><span class="pre">/c:/swagger</span></code>) or if the path is relative.  If you pass absolute
windows path (like <code class="docutils literal notranslate"><span class="pre">c:\swagger.yaml</span></code>), you can use
<code class="docutils literal notranslate"><span class="pre">prance.util.fs.abspath</span></code> to convert them.</p>
<p>URLs can also be parsed:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span> <span class="o">=</span> <span class="n">ResolvingParser</span><span class="p">(</span><span class="s1">&#39;http://petstore.swagger.io/v2/swagger.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Largely, that’s it. There is a whole slew of utility code that you may
or may not find useful, too. Look at the <a class="reference external" href="https://jfinkhaeuser.github.io/prance/#api-modules">full documentation</a> for details.</p>
</div>
<div class="section" id="compatibility">
<h2>Compatibility<a class="headerlink" href="#compatibility" title="Permalink to this headline">¶</a></h2>
<p>Different validation backends support different features.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="7%" />
<col width="8%" />
<col width="6%" />
<col width="25%" />
<col width="7%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Backend</th>
<th class="head">Python Version</th>
<th class="head">OpenAPI Version</th>
<th class="head">Strict Mode</th>
<th class="head">Notes</th>
<th class="head">Available From</th>
<th class="head">Link</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>swagger-spec-validator</td>
<td>2 and 3</td>
<td>2.0 only</td>
<td>yes</td>
<td>Slow; does not accept integer keys (see strict mode).</td>
<td>prance 0.1</td>
<td><a class="reference external" href="https://github.com/Yelp/swagger_spec_validator">swagger_spec_validator</a></td>
</tr>
<tr class="row-odd"><td>flex</td>
<td>2 and 3</td>
<td>2.0 only</td>
<td>n/a</td>
<td>Fastest; the default, and always required.</td>
<td>prance 0.8</td>
<td><a class="reference external" href="https://github.com/pipermerriam/flex">flex</a></td>
</tr>
<tr class="row-even"><td>openapi-spec-validator</td>
<td>3 only</td>
<td>2.0 and 3.0</td>
<td>yes</td>
<td>Slow; does not accept integer keys (see strict mode).</td>
<td>prance 0.11</td>
<td><a class="reference external" href="https://github.com/p1c2u/openapi-spec-validator">openapi_spec_validator</a></td>
</tr>
</tbody>
</table>
<p>You can select the backend in the constructor of the parser(s):</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span> <span class="o">=</span> <span class="n">ResolvingParser</span><span class="p">(</span><span class="s1">&#39;http://petstore.swagger.io/v2/swagger.json&#39;</span><span class="p">,</span> <span class="n">backend</span> <span class="o">=</span> <span class="s1">&#39;openapi-spec-validator&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Only the default backend is included in the dependencies; others are detected at run-time. If you
install them, they can be used:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install openapi-spec-validator
$ pip install prance
$ prance validate --backend=openapi-spec-validator path/to/spec.yml
</pre></div>
</div>
<p><em>A note on strict mode:</em> The OpenAPI specs are a little ambiguous. On the one hand, they use JSON
references and JSON schema a fair bit. But on the other hand, what they specify as examples does
not always match the JSON specs.</p>
<p>Most notably, JSON only accepts string keys in objects. However, some keys in the specs tend to be
integer values, most notably the status codes for responses. Strict mode rejects non-string keys;
the default lenient mode accepts them.</p>
<p>Since the <code class="docutils literal notranslate"><span class="pre">flex</span></code> validator is not based on JSON, it does not have this issue. The <code class="docutils literal notranslate"><span class="pre">strict</span></code> option
therefore does not apply here.</p>
</div>
<div class="section" id="a-note-on-json-references">
<h2>A Note on JSON References<a class="headerlink" href="#a-note-on-json-references" title="Permalink to this headline">¶</a></h2>
<p>The relevant parts of the RFC for JSON references can be condensed like this:</p>
<blockquote>
<div><p>A JSON Reference is a JSON object, which contains a member named
“$ref”, which has a JSON string value.  Example:</p>
<p>{ “$ref”: “<a class="reference external" href="http://example.com/example.json#/foo/bar">http://example.com/example.json#/foo/bar</a>” }</p>
<p>(…)</p>
<p>Any members other than “$ref” in a JSON Reference object SHALL be
ignored.</p>
<p>(…)</p>
<p>Resolution of a JSON Reference object SHOULD yield the referenced
JSON value.  Implementations MAY choose to replace the reference with
the referenced value.</p>
</div></blockquote>
<p>Prance is strict about ignoring additional keys, and does so by replacing the reference with
the referenced value.</p>
<p>In practice, that means that given such a reference:</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span># main file
---
foo: bar
$ref: /path/to/ref

# and at /path/to/ref
---
baz: quux
</pre></div>
</div>
<p>Then, after resolution, the result is the following:</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># resolved</span>
<span class="o">---</span>
<span class="n">baz</span><span class="p">:</span> <span class="n">quux</span>
</pre></div>
</div>
<p>That is, the key <code class="docutils literal notranslate"><span class="pre">foo</span></code> is ignored as the specs require. That is the reason the OpenAPI
specs tend to use JSON references within <code class="docutils literal notranslate"><span class="pre">schema</span></code> objects, and place any other parameters
as siblings of the <code class="docutils literal notranslate"><span class="pre">schema</span></code> object.</p>
</div>
<div class="section" id="extensions">
<h2>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h2>
<p>Prance includes the ability to reference outside swagger definitions
in outside Python packages. Such a package must already be importable
(i.e. installed), and be accessible via the
<a class="reference external" href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html#resourcemanager-api">ResourceManager API</a>
(some more info <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html#including-data-files">here</a>).</p>
<p>For example, you might create a package <code class="docutils literal notranslate"><span class="pre">common_swag</span></code> with the file
<code class="docutils literal notranslate"><span class="pre">base.yaml</span></code> containing the definition</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">definitions</span><span class="p">:</span>
  <span class="n">Severity</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">string</span>
    <span class="n">enum</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">INFO</span>
    <span class="o">-</span> <span class="n">WARN</span>
    <span class="o">-</span> <span class="n">ERROR</span>
    <span class="o">-</span> <span class="n">FATAL</span>
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> for <code class="docutils literal notranslate"><span class="pre">common_swag</span></code> you would add lines such as</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">),</span>
<span class="n">package_dir</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="s1">&#39;src&#39;</span><span class="p">},</span>
<span class="n">package_data</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="s1">&#39;*.yaml&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, having installed <code class="docutils literal notranslate"><span class="pre">common_swag</span></code> into some application, you could
now write</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span>definitions:
  Message:
    type: object
    properties:
      severity:
        $ref: &#39;python://common_swag/base.yaml#/definitions/Severity&#39;
      code:
        type: string
      summary:
        type: string
      description:
        type: string
    required:
    - severity
    - summary
</pre></div>
</div>
</div>
</div>
<div class="section" id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h1>
<p>See <a class="reference external" href="https://github.com/jfinkhaeuser/prance/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> for details.</p>
</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<p>Licensed under MITNFA (MIT +no-false-attribs) License. See the
<a class="reference external" href="https://github.com/jfinkhaeuser/prance/blob/master/LICENSE.txt">LICENSE.txt</a> file for details.</p>
<p>“Prancing unicorn” logo image Copyright (c) Jens Finkhaeuser. All rights reserved.
Made by <a class="reference external" href="http://morevenb.com/">Moreven B</a>.</p>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="api-modules">
<h1>API/Modules<a class="headerlink" href="#api-modules" title="Permalink to this headline">¶</a></h1>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="api/prance.html#module-prance" title="prance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance</span></code></a></td>
<td>Prance implements parsers for Swagger/OpenAPI 2.0 and 3.0.0 API specs.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/prance.mixins.html#module-prance.mixins" title="prance.mixins"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.mixins</span></code></a></td>
<td>Defines Mixins for parsers.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api/prance.convert.html#module-prance.convert" title="prance.convert"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.convert</span></code></a></td>
<td>Functionality for converting from Swagger/OpenAPI 2.0 to OpenAPI 3.0.0.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/prance.util.formats.html#module-prance.util.formats" title="prance.util.formats"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.util.formats</span></code></a></td>
<td>This submodule contains file format related utility code for Prance.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api/prance.util.fs.html#module-prance.util.fs" title="prance.util.fs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.util.fs</span></code></a></td>
<td>This submodule contains file system utilities for Prance.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/prance.util.iterators.html#module-prance.util.iterators" title="prance.util.iterators"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.util.iterators</span></code></a></td>
<td>This submodule contains specialty iterators over specs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api/prance.util.resolver.html#module-prance.util.resolver" title="prance.util.resolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.util.resolver</span></code></a></td>
<td>This submodule contains a JSON reference resolver.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/prance.util.url.html#module-prance.util.url" title="prance.util.url"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.util.url</span></code></a></td>
<td>This submodule contains code for fetching/parsing URLs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api/prance.util.exceptions.html#module-prance.util.exceptions" title="prance.util.exceptions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.util.exceptions</span></code></a></td>
<td>This submodule contains helpers for exception handling.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/prance.util.path.html#module-prance.util.path" title="prance.util.path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prance.util.path</span></code></a></td>
<td>This module contains code for accessing values in nested data structures.</td>
</tr>
</tbody>
</table>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2016-2017, Jens Finkhaeuser.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    
    <a href="https://github.com/jfinkhaeuser/prance" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>